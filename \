<?php

use Fernando\Doctrine\Entity\Student;
use Fernando\Doctrine\Helper\EntityManagerFactory;

require __DIR__ . '/../vendor/autoload.php';

$em = EntityManagerFactory::createEntityManager();

foreach ($argv as $arg) {
  $student = new Student($arg);

  $em->persist($student);
}
try {
  $em->flush();
} catch (\Doctrine\ORM\OptimisticLockException $e) {
  echo $e->getMessage();
} catch (\Doctrine\ORM\Exception\ORMException $e) {
  echo $e->getMessage();
}
